<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æ—¥æœ¬èŒ¶AIè¨ºæ–­ - è³ªå•ã«ç­”ãˆã¦æœ€é©ãªèŒ¶è‘‰ã‚’æ¨å¥¨ã€‚AIãŒã‚ãªãŸã®å¥½ã¿ã‚’åˆ†æã—ã¾ã™">
    <meta name="keywords" content="æ—¥æœ¬èŒ¶, AIè¨ºæ–­, èŒ¶è‘‰æ¨å¥¨, å‘³è¦šåˆ†æ, ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–">
    
    <title>Tea AI Diagnosis - nemotea</title>
    
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <link rel="icon" type="image/x-icon" href="../../../assets/images/favicon-16x16.png">
    
    <style>
        body {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .diagnosis-hero {
            padding: var(--space-2xl) 0;
            text-align: center;
            position: relative;
        }

        .ai-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto var(--space-xl);
            background: linear-gradient(135deg, #2d5016, #4a7c59);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(45, 80, 22, 0.4);
            animation: aiPulse 3s ease-in-out infinite alternate;
        }

        @keyframes aiPulse {
            0% { box-shadow: 0 0 40px rgba(45, 80, 22, 0.4); }
            100% { box-shadow: 0 0 60px rgba(74, 124, 89, 0.6); }
        }

        .ai-icon::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: rotate 4s linear infinite;
        }

        .diagnosis-container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: var(--space-2xl);
            margin: var(--space-xl) 0;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.5s ease;
            display: none;
        }

        .question-card.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #2d5016, #4a7c59, var(--cyber-green));
        }

        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .question-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #2d5016, #4a7c59);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: var(--space-md);
            box-shadow: 0 0 20px rgba(45, 80, 22, 0.3);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            flex: 1;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-md);
            margin-top: var(--space-lg);
        }

        .option-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: var(--space-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
            text-align: center;
            position: relative;
        }

        .option-card:hover {
            transform: translateY(-3px);
            border-color: rgba(45, 80, 22, 0.5);
            box-shadow: 0 8px 25px rgba(45, 80, 22, 0.3);
        }

        .option-card.selected {
            border-color: #4a7c59;
            background: rgba(45, 80, 22, 0.1);
            box-shadow: 0 0 30px rgba(74, 124, 89, 0.4);
        }

        .option-icon {
            font-size: 3rem;
            margin-bottom: var(--space-md);
            display: block;
        }

        .option-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .option-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .progress-section {
            margin: var(--space-xl) 0;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: var(--space-md) 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2d5016, #4a7c59);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-xl);
        }

        .nav-button {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: var(--space-md) var(--space-xl);
            cursor: pointer;
            transition: all var(--transition-normal);
            color: var(--text-primary);
            font-weight: 600;
        }

        .nav-button:hover {
            background: rgba(45, 80, 22, 0.2);
            border-color: rgba(45, 80, 22, 0.5);
            box-shadow: 0 0 20px rgba(45, 80, 22, 0.3);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-button.primary {
            background: linear-gradient(45deg, #2d5016, #4a7c59);
            color: white;
            box-shadow: 0 0 20px rgba(45, 80, 22, 0.4);
        }

        .result-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: var(--space-2xl);
            margin: var(--space-xl) 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            display: none;
        }

        .result-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #2d5016, #4a7c59, var(--cyber-green));
        }

        .result-tea-icon {
            font-size: 6rem;
            margin-bottom: var(--space-lg);
            display: block;
            filter: drop-shadow(0 0 20px rgba(45, 80, 22, 0.5));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .result-tea-name {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: var(--space-md);
            background: linear-gradient(45deg, #2d5016, #4a7c59);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .result-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: var(--space-xl);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
            margin: var(--space-xl) 0;
        }

        .result-detail {
            background: rgba(45, 80, 22, 0.1);
            border-radius: 12px;
            padding: var(--space-lg);
        }

        .detail-label {
            font-size: 0.9rem;
            color: #4a7c59;
            font-weight: 600;
            margin-bottom: var(--space-xs);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .detail-value {
            font-size: 1.1rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .professional-notes {
            background: rgba(45, 80, 22, 0.05);
            border-left: 4px solid #4a7c59;
            border-radius: 8px;
            padding: var(--space-lg);
            margin: var(--space-xl) 0;
        }

        .professional-notes h3 {
            color: #2d5016;
            margin-bottom: var(--space-md);
            font-size: 1.2rem;
        }

        .professional-notes p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin: 0;
        }

        .taste-profile {
            margin: var(--space-xl) 0;
        }

        .taste-bar {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .taste-label {
            min-width: 80px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .taste-track {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 0 var(--space-sm);
            overflow: hidden;
        }

        .taste-fill {
            height: 100%;
            background: linear-gradient(90deg, #2d5016, #4a7c59);
            border-radius: 3px;
            transition: width 1s ease;
        }

        .taste-value {
            min-width: 30px;
            font-size: 0.8rem;
            color: #4a7c59;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            margin-top: var(--space-xl);
            flex-wrap: wrap;
        }

        .action-button {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: var(--space-md) var(--space-lg);
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 600;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .action-button:hover {
            background: rgba(45, 80, 22, 0.2);
            border-color: rgba(45, 80, 22, 0.5);
            box-shadow: 0 0 20px rgba(45, 80, 22, 0.3);
        }

        .action-button.primary {
            background: linear-gradient(45deg, #2d5016, #4a7c59);
            color: white;
        }

        .loading-section {
            text-align: center;
            padding: var(--space-2xl);
            display: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(45, 80, 22, 0.3);
            border-top: 3px solid #4a7c59;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-lg);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .loading-subtitle {
            color: var(--text-secondary);
        }

        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }

            .result-details {
                grid-template-columns: 1fr;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: var(--space-md);
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <header class="glass-header mt-md">
            <nav class="nav">
                <a href="../../../" class="nav-logo">nemotea.dev</a>
                <button class="nav-toggle" id="nav-toggle" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã" aria-expanded="false">
                    â˜°
                </button>
                <ul class="nav-items" id="nav-items">
                    <li><a href="../../../" class="nav-item">Home</a></li>
                    <li><a href="../../../profile/" class="nav-item">Profile</a></li>
                    <li><a href="../../../works/" class="nav-item active">Works</a></li>
                    <li><a href="../../../podcast/" class="nav-item">Podcast</a></li>
                    <li><a href="../../../contact/" class="nav-item">Contact</a></li>
                </ul>
            </nav>
        </header>

        <!-- AIè¨ºæ–­ãƒ’ãƒ¼ãƒ­ãƒ¼ -->
        <section class="diagnosis-hero">
            <div class="ai-icon fade-in">
                <span style="position: relative; z-index: 2;">ğŸ¤–</span>
            </div>
            
            <h1 class="text-hero fade-in">Tea AI Diagnosis</h1>
            <p class="text-subtitle fade-in mb-lg">
                ã‚ãªãŸã«ãƒ”ãƒƒã‚¿ãƒªã®æ—¥æœ¬èŒ¶ã‚’AIãŒè¨ºæ–­
            </p>
            <p class="text-body fade-in" style="max-width: 600px; margin: 0 auto;">
                7ã¤ã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€ã‚ãªãŸã®å‘³è¦šå‚¾å‘ã‚’åˆ†æã—ã€<br>
                æœ€é©ãªæ—¥æœ¬èŒ¶ã‚’æ¨å¥¨ã—ã¾ã™ã€‚AIãŒã‚ãªãŸã®å¥½ã¿ã‚’å­¦ç¿’ã—ã¾ã™ã€‚
            </p>
        </section>

        <!-- è¨ºæ–­ã‚³ãƒ³ãƒ†ãƒŠ -->
        <div class="diagnosis-container">
            <!-- é€²æ—è¡¨ç¤º -->
            <div class="progress-section fade-in">
                <div class="progress-text">è³ªå• <span id="current-question">1</span> / <span id="total-questions">7</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
            <!-- è³ªå•1: ãŠèŒ¶ã‚’é£²ã‚€æ™‚é–“å¸¯ -->
            <div class="question-card active" data-question="1">
                <div class="question-header">
                    <div class="question-number">1</div>
                    <div class="question-text">ãŠèŒ¶ã‚’é£²ã‚€ã®ã¯ã„ã¤ãŒå¤šã„ã§ã™ã‹ï¼Ÿ</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="morning">
                        <span class="option-icon">ğŸŒ…</span>
                        <div class="option-title">æœ</div>
                        <div class="option-description">ç›®è¦šã‚ã®ä¸€æ¯ã¨ã—ã¦</div>
                    </div>
                    <div class="option-card" data-value="afternoon">
                        <span class="option-icon">â˜€ï¸</span>
                        <div class="option-title">æ˜¼</div>
                        <div class="option-description">é£Ÿäº‹ã¨ä¸€ç·’ã«</div>
                    </div>
                    <div class="option-card" data-value="evening">
                        <span class="option-icon">ğŸŒ†</span>
                        <div class="option-title">å¤•æ–¹</div>
                        <div class="option-description">ä»•äº‹ã®åˆé–“ã«</div>
                    </div>
                    <div class="option-card" data-value="night">
                        <span class="option-icon">ğŸŒ™</span>
                        <div class="option-title">å¤œ</div>
                        <div class="option-description">ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ ã«</div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•2: å‘³ã®å¥½ã¿ -->
            <div class="question-card" data-question="2">
                <div class="question-header">
                    <div class="question-number">2</div>
                    <div class="question-text">ã©ã‚“ãªå‘³ãŒãŠå¥½ã¿ã§ã™ã‹ï¼Ÿ</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="sweet">
                        <span class="option-icon">ğŸ¯</span>
                        <div class="option-title">ç”˜ã„</div>
                        <div class="option-description">ã¾ã‚ã‚„ã‹ã§å„ªã—ã„ç”˜å‘³</div>
                    </div>
                    <div class="option-card" data-value="bitter">
                        <span class="option-icon">ğŸŒ¿</span>
                        <div class="option-title">è‹¦ã„</div>
                        <div class="option-description">ã—ã£ã‹ã‚Šã¨ã—ãŸè‹¦å‘³</div>
                    </div>
                    <div class="option-card" data-value="astringent">
                        <span class="option-icon">ğŸƒ</span>
                        <div class="option-title">æ¸‹ã„</div>
                        <div class="option-description">å¼•ãç· ã¾ã‚‹æ¸‹å‘³</div>
                    </div>
                    <div class="option-card" data-value="umami">
                        <span class="option-icon">ğŸŒŠ</span>
                        <div class="option-title">æ—¨ã„</div>
                        <div class="option-description">æ·±ã„æ—¨å‘³ã¨ã‚³ã‚¯</div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•3: é¦™ã‚Šã®å¥½ã¿ -->
            <div class="question-card" data-question="3">
                <div class="question-header">
                    <div class="question-number">3</div>
                    <div class="question-text">ã©ã‚“ãªé¦™ã‚ŠãŒå¥½ãã§ã™ã‹ï¼Ÿ</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="fresh">
                        <span class="option-icon">ğŸŒ±</span>
                        <div class="option-title">é’è‰ç³»</div>
                        <div class="option-description">æ–°é®®ã§çˆ½ã‚„ã‹ãªé’è‰ã®é¦™ã‚Š</div>
                    </div>
                    <div class="option-card" data-value="floral">
                        <span class="option-icon">ğŸŒ¸</span>
                        <div class="option-title">èŠ±é¦™ç³»</div>
                        <div class="option-description">ä¸Šå“ã§è¯ã‚„ã‹ãªèŠ±ã®é¦™ã‚Š</div>
                    </div>
                    <div class="option-card" data-value="roasted">
                        <span class="option-icon">ğŸ”¥</span>
                        <div class="option-title">ç„™ç…ç³»</div>
                        <div class="option-description">é¦™ã°ã—ã„ãƒ­ãƒ¼ã‚¹ãƒˆé¦™</div>
                    </div>
                    <div class="option-card" data-value="marine">
                        <span class="option-icon">ğŸŒŠ</span>
                        <div class="option-title">æµ·è‹”ç³»</div>
                        <div class="option-description">æ·±ã¿ã®ã‚ã‚‹æµ·è‹”ã®é¦™ã‚Š</div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•4: æ¿ƒã•ã®å¥½ã¿ -->
            <div class="question-card" data-question="4">
                <div class="question-header">
                    <div class="question-number">4</div>
                    <div class="question-text">ãŠèŒ¶ã®æ¿ƒã•ã¯ã©ã¡ã‚‰ãŒãŠå¥½ã¿ã§ã™ã‹ï¼Ÿ</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="light">
                        <span class="option-icon">ğŸ’§</span>
                        <div class="option-title">è–„ã‚</div>
                        <div class="option-description">è»½ã‚„ã‹ã§é£²ã¿ã‚„ã™ã„</div>
                    </div>
                    <div class="option-card" data-value="medium">
                        <span class="option-icon">ğŸµ</span>
                        <div class="option-title">æ™®é€š</div>
                        <div class="option-description">ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ¿ƒã•</div>
                    </div>
                    <div class="option-card" data-value="strong">
                        <span class="option-icon">ğŸ’ª</span>
                        <div class="option-title">æ¿ƒã„ã‚</div>
                        <div class="option-description">ã—ã£ã‹ã‚Šã¨ã—ãŸå‘³ã‚ã„</div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•5: é£²ã‚€ã‚·ãƒ¼ãƒ³ -->
            <div class="question-card" data-question="5">
                <div class="question-header">
                    <div class="question-number">5</div>
                    <div class="question-text">ã©ã‚“ãªã‚·ãƒ¼ãƒ³ã§é£²ã‚€ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="work">
                        <span class="option-icon">ğŸ’»</span>
                        <div class="option-title">ä»•äº‹ä¸­</div>
                        <div class="option-description">é›†ä¸­åŠ›ã‚’é«˜ã‚ãŸã„</div>
                    </div>
                    <div class="option-card" data-value="relax">
                        <span class="option-icon">ğŸ§˜</span>
                        <div class="option-title">ãƒªãƒ©ãƒƒã‚¯ã‚¹</div>
                        <div class="option-description">ã‚†ã£ãŸã‚Šã¨éã”ã—ãŸã„</div>
                    </div>
                    <div class="option-card" data-value="meal">
                        <span class="option-icon">ğŸ½ï¸</span>
                        <div class="option-title">é£Ÿäº‹ä¸­</div>
                        <div class="option-description">æ–™ç†ã¨åˆã‚ã›ã¦</div>
                    </div>
                    <div class="option-card" data-value="social">
                        <span class="option-icon">ğŸ‘¥</span>
                        <div class="option-title">äººã¨ä¸€ç·’</div>
                        <div class="option-description">ä¼šè©±ã‚’æ¥½ã—ã¿ãªãŒã‚‰</div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•6: ã‚«ãƒ•ã‚§ã‚¤ãƒ³ã®å¥½ã¿ -->
            <div class="question-card" data-question="6">
                <div class="question-header">
                    <div class="question-number">6</div>
                    <div class="question-text">ã‚«ãƒ•ã‚§ã‚¤ãƒ³ã®æ‘‚å–ã«ã¤ã„ã¦ã¯ã„ã‹ãŒã§ã™ã‹ï¼Ÿ</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="high">
                        <span class="option-icon">âš¡</span>
                        <div class="option-title">å¤šã‚</div>
                        <div class="option-description">é›†ä¸­åŠ›ã‚’é«˜ã‚ãŸã„</div>
                    </div>
                    <div class="option-card" data-value="medium">
                        <span class="option-icon">âš–ï¸</span>
                        <div class="option-title">é©åº¦</div>
                        <div class="option-description">ãƒãƒ©ãƒ³ã‚¹ã‚’é‡è¦–</div>
                    </div>
                    <div class="option-card" data-value="low">
                        <span class="option-icon">ğŸŒ™</span>
                        <div class="option-title">å°‘ãªã‚</div>
                        <div class="option-description">å¤œã‚‚å®‰å¿ƒã—ã¦é£²ã¿ãŸã„</div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•7: èŒ¶è‘‰ã®å“è³ªã¸ã®é–¢å¿ƒ -->
            <div class="question-card" data-question="7">
                <div class="question-header">
                    <div class="question-number">7</div>
                    <div class="question-text">èŒ¶è‘‰ã®å“è³ªã‚„ã‚°ãƒ¬ãƒ¼ãƒ‰ã«ã¤ã„ã¦</div>
                </div>
                <div class="options-grid">
                    <div class="option-card" data-value="premium">
                        <span class="option-icon">ğŸ’</span>
                        <div class="option-title">é«˜ç´šå“</div>
                        <div class="option-description">å“è³ªé‡è¦–ã€ç‰¹åˆ¥ãªä½“é¨“</div>
                    </div>
                    <div class="option-card" data-value="standard">
                        <span class="option-icon">â­</span>
                        <div class="option-title">æ¨™æº–å“</div>
                        <div class="option-description">ã‚³ã‚¹ãƒ‘é‡è¦–ã€æ—¥å¸¸ä½¿ã„</div>
                    </div>
                    <div class="option-card" data-value="either">
                        <span class="option-icon">ğŸ¤”</span>
                        <div class="option-title">ã©ã¡ã‚‰ã§ã‚‚</div>
                        <div class="option-description">å‘³ãŒè‰¯ã‘ã‚Œã°å•é¡Œãªã—</div>
                    </div>
                </div>
            </div>

            <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
            <div class="navigation-buttons fade-in">
                <button class="nav-button" id="prev-button" disabled>â—€ å‰ã®è³ªå•</button>
                <button class="nav-button primary" id="next-button">æ¬¡ã®è³ªå• â–¶</button>
            </div>
        </div>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="loading-section" id="loading-section">
            <div class="loading-spinner"></div>
            <div class="loading-text">AIãŒåˆ†æä¸­ã§ã™...</div>
            <div class="loading-subtitle">ã‚ãªãŸã®å‘³è¦šå‚¾å‘ã‚’è§£æã—ã¦ã„ã¾ã™</div>
        </div>

        <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="result-section" id="result-section">
            <span class="result-tea-icon" id="result-icon">ğŸµ</span>
            <h2 class="result-tea-name" id="result-name">ç…èŒ¶</h2>
            <p class="result-description" id="result-description">
                ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸå‘³ã‚ã„ã¨æ¸…æ¶¼æ„Ÿã®ã‚ã‚‹é¦™ã‚ŠãŒç‰¹å¾´ã®ã€æ—¥æœ¬ã‚’ä»£è¡¨ã™ã‚‹ç·‘èŒ¶ã§ã™ã€‚
            </p>

            <div class="result-details">
                <div class="result-detail">
                    <div class="detail-label">é©åˆåº¦</div>
                    <div class="detail-value" id="match-score">95%</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">æ°´æ¸©</div>
                    <div class="detail-value" id="water-temp">70-80â„ƒ</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">æŠ½å‡ºæ™‚é–“</div>
                    <div class="detail-value" id="steep-time">1-2åˆ†</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">ãŠã™ã™ã‚æ™‚é–“</div>
                    <div class="detail-value" id="best-time">æœãƒ»æ˜¼</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">å“è³ªã‚°ãƒ¬ãƒ¼ãƒ‰</div>
                    <div class="detail-value" id="tea-grade">æ¨™æº–</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">ã‚«ãƒ•ã‚§ã‚¤ãƒ³</div>
                    <div class="detail-value" id="caffeine-level">ä¸­ç¨‹åº¦</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">ç”£åœ°</div>
                    <div class="detail-value" id="origin">é™å²¡ãƒ»é¹¿å…å³¶</div>
                </div>
                <div class="result-detail">
                    <div class="detail-label">å­£ç¯€</div>
                    <div class="detail-value" id="season">é€šå¹´</div>
                </div>
            </div>

            <div class="professional-notes">
                <h3>ğŸƒ å°‚é–€å®¶ã‚³ãƒ¡ãƒ³ãƒˆ</h3>
                <p id="professional-comment">
                    ã“ã®è¨ºæ–­çµæœã¯ã€ã‚ãªãŸã®å‘³è¦šå‚¾å‘ã¨èŒ¶è‘‰ã®ç‰¹æ€§ã‚’ç·åˆçš„ã«åˆ†æã—ãŸã‚‚ã®ã§ã™ã€‚
                </p>
            </div>

            <div class="taste-profile">
                <h3 style="text-align: center; margin-bottom: var(--space-lg); color: #2d5016;">å‘³è¦šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«</h3>
                <div class="taste-bar">
                    <span class="taste-label">ç”˜å‘³</span>
                    <div class="taste-track">
                        <div class="taste-fill" id="sweetness-bar"></div>
                    </div>
                    <span class="taste-value" id="sweetness-value">5</span>
                </div>
                <div class="taste-bar">
                    <span class="taste-label">è‹¦å‘³</span>
                    <div class="taste-track">
                        <div class="taste-fill" id="bitterness-bar"></div>
                    </div>
                    <span class="taste-value" id="bitterness-value">4</span>
                </div>
                <div class="taste-bar">
                    <span class="taste-label">æ¸‹å‘³</span>
                    <div class="taste-track">
                        <div class="taste-fill" id="astringency-bar"></div>
                    </div>
                    <span class="taste-value" id="astringency-value">6</span>
                </div>
                <div class="taste-bar">
                    <span class="taste-label">æ—¨å‘³</span>
                    <div class="taste-track">
                        <div class="taste-fill" id="umami-bar"></div>
                    </div>
                    <span class="taste-value" id="umami-value">7</span>
                </div>
            </div>

            <div class="action-buttons">
                <a href="../tea-wheel/" class="action-button primary">ğŸƒ ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒ›ã‚¤ãƒ¼ãƒ«ã§è©³ã—ã</a>
                <a href="../../../contact/" class="action-button">ğŸ’Œ èŒ¶è‘‰ã«ã¤ã„ã¦ç›¸è«‡</a>
                <button class="action-button" id="restart-button">ğŸ”„ ã‚‚ã†ä¸€åº¦è¨ºæ–­</button>
            </div>
        </div>
    </div>
    <script src="../../../assets/js/main.js"></script>
    
    <script>
        // æ—¥æœ¬èŒ¶ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const teaDatabase = {
            sencha: {
                name: "ç…èŒ¶",
                icon: "ğŸµ",
                description: "æ—¥æœ¬èŒ¶ã®ä»£è¡¨æ ¼ã€‚ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸå‘³ã‚ã„ã¨æ¸…æ¶¼æ„Ÿã®ã‚ã‚‹é¦™ã‚ŠãŒç‰¹å¾´ã€‚èŒ¶è‘‰ã®å“è³ªã¨è£½æ³•ã«ã‚ˆã‚Šã€ä¸Šç´šå“ã§ã¯ä¸Šå“ãªç”˜å‘³ã¨æ—¨å‘³ãŒæ¥½ã—ã‚ã¾ã™ã€‚",
                waterTemp: "70-90â„ƒ",
                steepTime: "1-2åˆ†",
                bestTime: "æœãƒ»æ˜¼",
                taste: { sweetness: 5, bitterness: 4, astringency: 6, umami: 7 },
                keywords: ["ãƒãƒ©ãƒ³ã‚¹", "çˆ½ã‚„ã‹", "ä¸‡èƒ½", "é’è‰", "æ¸…æ¶¼æ„Ÿ"],
                grade: "standard",
                caffeine: "medium",
                origin: "é™å²¡ãƒ»é¹¿å…å³¶",
                season: "é€šå¹´"
            },
            gyokuro: {
                name: "ç‰éœ²",
                icon: "ğŸ’",
                description: "æ—¥æœ¬èŒ¶ã®æœ€é«˜å³°ã€‚20æ—¥ä»¥ä¸Šã®è¦†ã„æ ½åŸ¹ã«ã‚ˆã‚Šã€ã‚¯ãƒ­ãƒ­ãƒ•ã‚£ãƒ«ã¨ã‚¢ãƒŸãƒé…¸ï¼ˆãƒ†ã‚¢ãƒ‹ãƒ³ï¼‰ãŒè±Šå¯Œã€‚ç”˜å‘³ã¨æ—¨å‘³ã®èª¿å’ŒãŒçµ¶å¦™ã§ã€æ¸‹å‘³ã¯æ¥µã‚ã¦å°‘ãªã„ã€‚",
                waterTemp: "50-60â„ƒ",
                steepTime: "2-3åˆ†",
                bestTime: "åˆå¾Œãƒ»å¤•æ–¹",
                taste: { sweetness: 9, bitterness: 2, astringency: 3, umami: 10 },
                keywords: ["é«˜ç´š", "ä¸Šå“", "ç”˜å‘³", "æ—¨å‘³", "è¦†ã„æ ½åŸ¹", "ãƒ†ã‚¢ãƒ‹ãƒ³"],
                grade: "premium",
                caffeine: "high",
                origin: "äº¬éƒ½å®‡æ²»ãƒ»ç¦å²¡å…«å¥³",
                season: "æ˜¥"
            },
            matcha: {
                name: "æŠ¹èŒ¶",
                icon: "ğŸƒ",
                description: "è¦†ã„æ ½åŸ¹ã•ã‚ŒãŸèŒ¶è‘‰ã‚’çŸ³è‡¼ã§æŒ½ã„ãŸç²‰æœ«èŒ¶ã€‚æ¿ƒåšãªå‘³ã‚ã„ã¨é®®ã‚„ã‹ãªè‰²ãŒç‰¹å¾´ã€‚è–„èŒ¶ã¨æ¿ƒèŒ¶ã§ç•°ãªã‚‹å‘³ã‚ã„ã‚’æ¥½ã—ã‚ã‚‹ã€‚",
                waterTemp: "70-80â„ƒ",
                steepTime: "æ’¹æ‹Œ",
                bestTime: "ã„ã¤ã§ã‚‚",
                taste: { sweetness: 7, bitterness: 8, astringency: 5, umami: 9 },
                keywords: ["æ¿ƒåš", "èŒ¶é“", "çŸ³è‡¼", "ä¼çµ±", "ã‚«ãƒ†ã‚­ãƒ³"],
                grade: "premium",
                caffeine: "high",
                origin: "äº¬éƒ½å®‡æ²»ãƒ»æ„›çŸ¥è¥¿å°¾",
                season: "æ˜¥"
            },
            hojicha: {
                name: "ã»ã†ã˜èŒ¶",
                icon: "ğŸ”¥",
                description: "èŒ¶è‘‰ã‚’é«˜æ¸©ã§ç„™ç…ã—ãŸé¦™ã°ã—ã„é¦™ã‚ŠãŒç‰¹å¾´ã€‚ç„™ç…ã«ã‚ˆã‚Šã‚«ãƒ•ã‚§ã‚¤ãƒ³ã¨ã‚¿ãƒ³ãƒ‹ãƒ³ãŒæ¸›å°‘ã—ã€å¤œã§ã‚‚å®‰å¿ƒã—ã¦é£²ã‚ã‚‹å„ªã—ã„å‘³ã‚ã„ã€‚",
                waterTemp: "90-100â„ƒ",
                steepTime: "30ç§’-1åˆ†",
                bestTime: "å¤œãƒ»ãƒªãƒ©ãƒƒã‚¯ã‚¹",
                taste: { sweetness: 6, bitterness: 3, astringency: 2, umami: 4 },
                keywords: ["é¦™ã°ã—ã„", "ç„™ç…", "å¤œ", "ãƒªãƒ©ãƒƒã‚¯ã‚¹", "ä½ã‚«ãƒ•ã‚§ã‚¤ãƒ³"],
                grade: "standard",
                caffeine: "low",
                origin: "äº¬éƒ½ãƒ»é™å²¡",
                season: "é€šå¹´"
            },
            genmaicha: {
                name: "ç„ç±³èŒ¶",
                icon: "ğŸŒ¾",
                description: "ç·‘èŒ¶ã¨ç‚’ã£ãŸç„ç±³ã‚’ãƒ–ãƒ¬ãƒ³ãƒ‰ã€‚ç„ç±³ã®é¦™ã°ã—ã•ã¨ç·‘èŒ¶ã®çˆ½ã‚„ã‹ã•ãŒèª¿å’Œã€‚é£Ÿäº‹ã¨ã®ç›¸æ€§ãŒè‰¯ãã€èƒƒã«å„ªã—ã„ã€‚",
                waterTemp: "90-100â„ƒ",
                steepTime: "30ç§’",
                bestTime: "é£Ÿå¾Œ",
                taste: { sweetness: 5, bitterness: 2, astringency: 3, umami: 3 },
                keywords: ["ç„ç±³", "é¦™ã°ã—ã„", "é£Ÿäº‹", "ãƒ–ãƒ¬ãƒ³ãƒ‰", "èƒƒã«å„ªã—ã„"],
                grade: "standard",
                caffeine: "low",
                origin: "å…¨å›½",
                season: "é€šå¹´"
            },
            fukamushicha: {
                name: "æ·±è’¸ã—èŒ¶",
                icon: "ğŸ’š",
                description: "é€šå¸¸ã®2-3å€ã®æ™‚é–“è’¸ã—ãŸèŒ¶è‘‰ã€‚è’¸ã—æ™‚é–“ãŒé•·ã„ãŸã‚èŒ¶è‘‰ãŒç´°ã‹ããªã‚Šã€æ¿ƒåšã§ã¾ã‚ã‚„ã‹ãªå‘³ã‚ã„ã€‚æ°´è‰²ã¯æ¿ƒã„ç·‘è‰²ã€‚",
                waterTemp: "70-80â„ƒ",
                steepTime: "45ç§’",
                bestTime: "æœãƒ»æ˜¼",
                taste: { sweetness: 6, bitterness: 5, astringency: 7, umami: 8 },
                keywords: ["æ¿ƒåš", "ã‚³ã‚¯", "æ·±è’¸ã—", "ã¾ã‚ã‚„ã‹", "é™å²¡"],
                grade: "standard",
                caffeine: "medium",
                origin: "é™å²¡",
                season: "é€šå¹´"
            },
            bancha: {
                name: "ç•ªèŒ¶",
                icon: "ğŸŒ¿",
                description: "ä¸‰ç•ªèŒ¶ä»¥é™ã®æˆé•·ã—ãŸèŒ¶è‘‰ã‚„èŒã‚’ä½¿ç”¨ã€‚ã™ã£ãã‚Šã¨ã—ãŸå‘³ã‚ã„ã§é£²ã¿ã‚„ã™ãã€æ—¥å¸¸èŒ¶ã¨ã—ã¦è¦ªã—ã¾ã‚Œã‚‹ã€‚",
                waterTemp: "80-90â„ƒ",
                steepTime: "1åˆ†",
                bestTime: "é£Ÿäº‹ä¸­",
                taste: { sweetness: 3, bitterness: 3, astringency: 4, umami: 4 },
                keywords: ["ã™ã£ãã‚Š", "æ—¥å¸¸", "é£Ÿäº‹", "è»½ã‚„ã‹", "çµŒæ¸ˆçš„"],
                grade: "standard",
                caffeine: "low",
                origin: "å…¨å›½",
                season: "å¤ãƒ»ç§‹"
            },
            shincha: {
                name: "æ–°èŒ¶",
                icon: "ğŸŒ±",
                description: "ãã®å¹´ã®æœ€åˆã«æ‘˜ã¾ã‚ŒãŸä¸€ç•ªèŒ¶ã€‚æ–°èŠ½ã®æŸ”ã‚‰ã‹ã•ã¨è±Šå¯Œãªæ „é¤Šç´ ã«ã‚ˆã‚Šã€ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªé¦™ã‚Šã¨ç”˜å‘³ãŒæ¥½ã—ã‚ã‚‹å­£ç¯€é™å®šèŒ¶ã€‚",
                waterTemp: "70â„ƒ",
                steepTime: "1åˆ†",
                bestTime: "åˆå‰ä¸­",
                taste: { sweetness: 8, bitterness: 3, astringency: 5, umami: 7 },
                keywords: ["ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥", "å­£ç¯€", "ä¸€ç•ªèŒ¶", "ç”˜å‘³", "æ–°èŠ½"],
                grade: "premium",
                caffeine: "medium",
                origin: "é¹¿å…å³¶ãƒ»é™å²¡",
                season: "æ˜¥"
            },
            kabusecha: {
                name: "ã‹ã¶ã›èŒ¶",
                icon: "ğŸŒ™",
                description: "æ‘˜æ¡å‰ã«1-2é€±é–“è¦†ã„ã‚’ã‹ã‘ãŸèŒ¶è‘‰ã€‚ç‰éœ²ã¨ç…èŒ¶ã®ä¸­é–“çš„ãªå‘³ã‚ã„ã§ã€ä¸Šå“ãªç”˜å‘³ã¨æ—¨å‘³ã‚’æŒã¤ã€‚",
                waterTemp: "65-75â„ƒ",
                steepTime: "1-2åˆ†",
                bestTime: "åˆå¾Œ",
                taste: { sweetness: 7, bitterness: 3, astringency: 4, umami: 8 },
                keywords: ["ä¸Šå“", "ç”˜å‘³", "æ—¨å‘³", "è¦†ã„æ ½åŸ¹", "ä¸­ç´š"],
                grade: "premium",
                caffeine: "medium",
                origin: "ä¸‰é‡ãƒ»äº¬éƒ½",
                season: "æ˜¥"
            },
            kukicha: {
                name: "èŒèŒ¶ï¼ˆæ£’èŒ¶ï¼‰",
                icon: "ğŸŒ¾",
                description: "èŒ¶è‘‰ã®èŒã‚„èŠ½ã®éƒ¨åˆ†ã‚’ä½¿ç”¨ã€‚ã•ã£ã±ã‚Šã¨ã—ãŸå‘³ã‚ã„ã§ã€ç‹¬ç‰¹ã®ç”˜ã„é¦™ã‚ŠãŒã‚ã‚‹ã€‚ã‚«ãƒ•ã‚§ã‚¤ãƒ³ãŒå°‘ãªãé£²ã¿ã‚„ã™ã„ã€‚",
                waterTemp: "80-90â„ƒ",
                steepTime: "30ç§’-1åˆ†",
                bestTime: "å¤œãƒ»ãƒªãƒ©ãƒƒã‚¯ã‚¹",
                taste: { sweetness: 6, bitterness: 2, astringency: 3, umami: 5 },
                keywords: ["ã•ã£ã±ã‚Š", "ç”˜ã„é¦™ã‚Š", "èŒ", "ä½ã‚«ãƒ•ã‚§ã‚¤ãƒ³", "è»½ã‚„ã‹"],
                grade: "standard",
                caffeine: "low",
                origin: "é™å²¡ãƒ»é¹¿å…å³¶",
                season: "é€šå¹´"
            },
            tamaryokucha: {
                name: "ç‰ç·‘èŒ¶",
                icon: "ğŸƒ",
                description: "å‹¾ç‰çŠ¶ã«ä¸¸ã¾ã£ãŸå½¢çŠ¶ãŒç‰¹å¾´ã€‚è’¸ã—è£½ã¨é‡œç‚’ã‚Šè£½ãŒã‚ã‚Šã€ç‰¹ã«é‡œç‚’ã‚Šè£½ã¯é¦™ã°ã—ã„é¦™ã‚Šã¨ç‹¬ç‰¹ã®é¢¨å‘³ã‚’æŒã¤ã€‚",
                waterTemp: "75-85â„ƒ",
                steepTime: "1-2åˆ†",
                bestTime: "æœãƒ»æ˜¼",
                taste: { sweetness: 5, bitterness: 4, astringency: 5, umami: 6 },
                keywords: ["å‹¾ç‰", "é‡œç‚’ã‚Š", "é¦™ã°ã—ã„", "ç‹¬ç‰¹", "ä¹å·"],
                grade: "standard",
                caffeine: "medium",
                origin: "ä½è³€ãƒ»é•·å´",
                season: "é€šå¹´"
            },
            konacha: {
                name: "ç²‰èŒ¶",
                icon: "ğŸ’¨",
                description: "èŒ¶è‘‰ã‚’ç´°ã‹ãç •ã„ãŸç²‰çŠ¶ã®èŒ¶ã€‚æ¿ƒåšã§æ¸‹å‘³ãŒå¼·ãã€å¯¿å¸å±‹ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ã€‚çŸ­æ™‚é–“ã§æŠ½å‡ºã§ãã‚‹ã€‚",
                waterTemp: "80-90â„ƒ",
                steepTime: "15-30ç§’",
                bestTime: "é£Ÿäº‹ä¸­",
                taste: { sweetness: 3, bitterness: 7, astringency: 8, umami: 6 },
                keywords: ["æ¿ƒåš", "æ¸‹å‘³", "å¯¿å¸å±‹", "çŸ­æ™‚é–“", "ç²‰çŠ¶"],
                grade: "standard",
                caffeine: "high",
                origin: "é™å²¡ãƒ»é¹¿å…å³¶",
                season: "é€šå¹´"
            }
        };

        // AIè¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯
        class TeaAIDiagnosis {
            constructor() {
                this.currentQuestion = 1;
                this.totalQuestions = 7;
                this.answers = {};
                this.isCompleted = false;
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateProgress();
            }

            setupEventListeners() {
                // ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠ
                document.querySelectorAll('.option-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.selectOption(e.currentTarget);
                    });
                });

                // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
                document.getElementById('prev-button').addEventListener('click', () => {
                    this.previousQuestion();
                });

                document.getElementById('next-button').addEventListener('click', () => {
                    this.nextQuestion();
                });

                // ãƒªã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³
                document.getElementById('restart-button').addEventListener('click', () => {
                    this.restart();
                });
            }

            selectOption(card) {
                const questionCard = card.closest('.question-card');
                const questionNum = parseInt(questionCard.dataset.question);
                const value = card.dataset.value;

                // åŒã˜è³ªå•å†…ã®ä»–ã®é¸æŠã‚’è§£é™¤
                questionCard.querySelectorAll('.option-card').forEach(c => {
                    c.classList.remove('selected');
                });

                // é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
                card.classList.add('selected');
                
                // ç­”ãˆã‚’ä¿å­˜
                this.answers[questionNum] = value;

                // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
                this.updateNavigationButtons();

                // é¸æŠã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                card.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    card.style.transform = '';
                }, 200);
            }

            updateNavigationButtons() {
                const prevButton = document.getElementById('prev-button');
                const nextButton = document.getElementById('next-button');

                // å‰ã¸ãƒœã‚¿ãƒ³
                prevButton.disabled = this.currentQuestion === 1;

                // æ¬¡ã¸ãƒœã‚¿ãƒ³
                const hasAnswer = this.answers[this.currentQuestion];
                if (this.currentQuestion === this.totalQuestions) {
                    nextButton.textContent = hasAnswer ? 'è¨ºæ–­çµæœã‚’è¦‹ã‚‹ âœ¨' : 'å›ç­”ã‚’é¸æŠã—ã¦ãã ã•ã„';
                    nextButton.disabled = !hasAnswer;
                } else {
                    nextButton.textContent = hasAnswer ? 'æ¬¡ã®è³ªå• â–¶' : 'å›ç­”ã‚’é¸æŠã—ã¦ãã ã•ã„';
                    nextButton.disabled = !hasAnswer;
                }
            }

            nextQuestion() {
                if (this.currentQuestion < this.totalQuestions) {
                    this.showQuestion(this.currentQuestion + 1);
                } else {
                    this.showResults();
                }
            }

            previousQuestion() {
                if (this.currentQuestion > 1) {
                    this.showQuestion(this.currentQuestion - 1);
                }
            }

            showQuestion(questionNum) {
                // ç¾åœ¨ã®è³ªå•ã‚’éè¡¨ç¤º
                document.querySelectorAll('.question-card').forEach(card => {
                    card.classList.remove('active');
                });

                // æ–°ã—ã„è³ªå•ã‚’è¡¨ç¤º
                const targetQuestion = document.querySelector(`[data-question="${questionNum}"]`);
                if (targetQuestion) {
                    targetQuestion.classList.add('active');
                }

                this.currentQuestion = questionNum;
                this.updateProgress();
                this.updateNavigationButtons();

                // æ—¢ã«ç­”ãˆãŒã‚ã‚‹å ´åˆã¯é¸æŠçŠ¶æ…‹ã‚’å¾©å…ƒ
                if (this.answers[questionNum]) {
                    const selectedOption = targetQuestion.querySelector(`[data-value="${this.answers[questionNum]}"]`);
                    if (selectedOption) {
                        selectedOption.classList.add('selected');
                    }
                }
            }

            updateProgress() {
                document.getElementById('current-question').textContent = this.currentQuestion;
                document.getElementById('total-questions').textContent = this.totalQuestions;
                
                const progress = (this.currentQuestion / this.totalQuestions) * 100;
                document.getElementById('progress-fill').style.width = progress + '%';
            }

            async showResults() {
                // è¨ºæ–­ã‚³ãƒ³ãƒ†ãƒŠã‚’éè¡¨ç¤º
                document.querySelector('.diagnosis-container').style.display = 'none';
                
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
                document.getElementById('loading-section').style.display = 'block';

                // AIã«ã‚ˆã‚‹åˆ†æã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                await this.simulateAIAnalysis();

                // çµæœã‚’è¨ˆç®—
                const result = this.calculateResult();

                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°éè¡¨ç¤º
                document.getElementById('loading-section').style.display = 'none';

                // çµæœè¡¨ç¤º
                this.displayResult(result);
            }

            async simulateAIAnalysis() {
                // AIã®åˆ†æéç¨‹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                const steps = [
                    "å‘³è¦šå‚¾å‘ã‚’åˆ†æä¸­...",
                    "é¦™ã‚Šã®å¥½ã¿ã‚’è§£æä¸­...",
                    "ç”Ÿæ´»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è©•ä¾¡ä¸­...",
                    "æœ€é©ãªèŒ¶è‘‰ã‚’é¸å®šä¸­...",
                    "è¨ºæ–­çµæœã‚’ç”Ÿæˆä¸­..."
                ];

                for (let i = 0; i < steps.length; i++) {
                    document.querySelector('.loading-subtitle').textContent = steps[i];
                    await new Promise(resolve => setTimeout(resolve, 800));
                }
            }

            calculateResult() {
                const answers = this.answers;
                let scores = {};

                // å„èŒ¶è‘‰ã«å¯¾ã—ã¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
                Object.keys(teaDatabase).forEach(teaKey => {
                    scores[teaKey] = this.calculateTeaScore(teaDatabase[teaKey], answers);
                });

                // æœ€é«˜ã‚¹ã‚³ã‚¢ã®èŒ¶è‘‰ã‚’é¸æŠ
                const bestTea = Object.keys(scores).reduce((a, b) => 
                    scores[a] > scores[b] ? a : b
                );

                return {
                    tea: teaDatabase[bestTea],
                    score: Math.round(scores[bestTea]),
                    allScores: scores
                };
            }

            calculateTeaScore(tea, answers) {
                let score = 0;
                
                // åŸºæœ¬é©åˆåº¦ï¼ˆ60%ï¼‰
                // æ™‚é–“å¸¯ã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ15%ï¼‰
                const timeScore = this.getTimeScore(tea, answers[1]);
                score += timeScore * 15;

                // å‘³è¦šã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ20%ï¼‰
                const tasteScore = this.getTasteScore(tea, answers[2]);
                score += tasteScore * 20;

                // é¦™ã‚Šã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ15%ï¼‰
                const aromaScore = this.getAromaScore(tea, answers[3]);
                score += aromaScore * 15;

                // æ¿ƒã•ã®å¥½ã¿ã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ10%ï¼‰
                const strengthScore = this.getStrengthScore(tea, answers[4]);
                score += strengthScore * 10;

                // å°‚é–€çš„è©•ä¾¡ï¼ˆ40%ï¼‰
                // ã‚·ãƒ¼ãƒ³ã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ15%ï¼‰
                const sceneScore = this.getSceneScore(tea, answers[5]);
                score += sceneScore * 15;

                // ã‚«ãƒ•ã‚§ã‚¤ãƒ³ã®å¥½ã¿ã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ10%ï¼‰
                const caffeineScore = this.getCaffeineScore(tea, answers[6]);
                score += caffeineScore * 10;

                // å“è³ªã‚°ãƒ¬ãƒ¼ãƒ‰ã«ã‚ˆã‚‹é©åˆæ€§ï¼ˆ15%ï¼‰
                const gradeScore = this.getGradeScore(tea, answers[7]);
                score += gradeScore * 15;

                // å°‚é–€çš„ãƒœãƒ¼ãƒŠã‚¹è¦å› 
                // å­£ç¯€æ€§ãƒœãƒ¼ãƒŠã‚¹ï¼ˆç¾åœ¨ã®å­£ç¯€ã«é©ã—ãŸèŒ¶è‘‰ï¼‰
                const seasonBonus = this.getSeasonBonus(tea);
                score += seasonBonus;

                // å‘³ã®ãƒãƒ©ãƒ³ã‚¹èª¿å’Œåº¦
                const harmonyBonus = this.getHarmonyBonus(tea, answers);
                score += harmonyBonus;

                return Math.round(Math.max(0, Math.min(100, score)));
            }

            getTimeScore(tea, timeAnswer) {
                const timeMapping = {
                    'morning': ['æœ', 'åˆå‰'],
                    'afternoon': ['æ˜¼', 'åˆå¾Œ'],
                    'evening': ['å¤•æ–¹'],
                    'night': ['å¤œ', 'ãƒªãƒ©ãƒƒã‚¯ã‚¹']
                };

                const preferredTimes = timeMapping[timeAnswer] || [];
                
                // å®Œå…¨ä¸€è‡´ã®å ´åˆ
                if (preferredTimes.some(time => tea.bestTime.includes(time))) return 1;
                
                // éƒ¨åˆ†ä¸€è‡´ã®å ´åˆï¼ˆä¾‹ï¼šã€Œã„ã¤ã§ã‚‚ã€ï¼‰
                if (tea.bestTime.includes('ã„ã¤ã§ã‚‚')) return 0.8;
                
                // æœã®ãŠèŒ¶ã‚’æ˜¼ã«é£²ã‚€å ´åˆãªã©ã€è¿‘ã„æ™‚é–“å¸¯ã®å ´åˆ
                if (timeAnswer === 'morning' && tea.bestTime.includes('æ˜¼')) return 0.6;
                if (timeAnswer === 'afternoon' && (tea.bestTime.includes('æœ') || tea.bestTime.includes('å¤•æ–¹'))) return 0.6;
                
                return 0.3;
            }

            getTasteScore(tea, tasteAnswer) {
                const tasteMapping = {
                    'sweet': 'sweetness',
                    'bitter': 'bitterness',
                    'astringent': 'astringency',
                    'umami': 'umami'
                };

                const targetTaste = tasteMapping[tasteAnswer];
                if (!targetTaste) return 0.5;

                const tasteValue = tea.taste[targetTaste];
                
                // é«˜ã„å€¤ï¼ˆ7-10ï¼‰ãªã‚‰å®Œå…¨é©åˆ
                if (tasteValue >= 7) return 1;
                // ä¸­ç¨‹åº¦ï¼ˆ4-6ï¼‰ãªã‚‰éƒ¨åˆ†é©åˆ
                if (tasteValue >= 4) return 0.7;
                // ä½ã„å€¤ï¼ˆ1-3ï¼‰ãªã‚‰ä½é©åˆ
                return 0.3;
            }

            getAromaScore(tea, aromaAnswer) {
                const aromaMapping = {
                    'fresh': ['é’è‰', 'çˆ½ã‚„ã‹', 'ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥', 'æ¸…æ¶¼æ„Ÿ'],
                    'floral': ['èŠ±é¦™', 'ä¸Šå“', 'è¯ã‚„ã‹'],
                    'roasted': ['é¦™ã°ã—ã„', 'ç„™ç…', 'ãƒ­ãƒ¼ã‚¹ãƒˆ'],
                    'marine': ['æµ·è‹”', 'æµ·è—»', 'æ·±ã¿', 'ãƒ†ã‚¢ãƒ‹ãƒ³']
                };

                const aromaKeywords = aromaMapping[aromaAnswer] || [];
                
                // å®Œå…¨ä¸€è‡´
                const perfectMatch = aromaKeywords.some(keyword => 
                    tea.keywords.some(teaKeyword => teaKeyword.includes(keyword))
                );
                
                if (perfectMatch) return 1;
                
                // é–¢é€£æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆä¾‹ï¼šé«˜ç´šèŒ¶ã¯ä¸Šå“ãªé¦™ã‚Šï¼‰
                if (aromaAnswer === 'floral' && tea.grade === 'premium') return 0.7;
                if (aromaAnswer === 'roasted' && (tea.name.includes('ã»ã†ã˜') || tea.name.includes('ç„ç±³'))) return 0.9;
                if (aromaAnswer === 'fresh' && tea.name.includes('æ–°èŒ¶')) return 0.8;
                
                return 0.3;
            }

            getStrengthScore(tea, strengthAnswer) {
                // èŒ¶è‘‰ã®å¼·åº¦ã‚’æ¨å®šï¼ˆè‹¦å‘³+æ¸‹å‘³+ã‚«ãƒ•ã‚§ã‚¤ãƒ³ãƒ¬ãƒ™ãƒ«ã§åˆ¤å®šï¼‰
                const tasteStrength = (tea.taste.bitterness + tea.taste.astringency) / 2;
                
                // ã‚«ãƒ•ã‚§ã‚¤ãƒ³ãƒ¬ãƒ™ãƒ«ã‚‚è€ƒæ…®
                let caffeineModifier = 0;
                if (tea.caffeine === 'high') caffeineModifier = 2;
                else if (tea.caffeine === 'medium') caffeineModifier = 1;
                else caffeineModifier = 0;
                
                const totalStrength = tasteStrength + caffeineModifier;
                
                const strengthMapping = {
                    'light': [0, 5],
                    'medium': [4, 8],
                    'strong': [7, 12]
                };

                const [min, max] = strengthMapping[strengthAnswer] || [0, 12];
                
                // ç¯„å›²å†…ãªã‚‰é«˜ã‚¹ã‚³ã‚¢
                if (totalStrength >= min && totalStrength <= max) return 1;
                
                // ç¯„å›²ã«è¿‘ã„å ´åˆã¯ä¸­ç¨‹åº¦ã®ã‚¹ã‚³ã‚¢
                const distance = Math.min(Math.abs(totalStrength - min), Math.abs(totalStrength - max));
                if (distance <= 2) return 0.7;
                
                return 0.3;
            }

            getSceneScore(tea, sceneAnswer) {
                const sceneMapping = {
                    'work': ['æœ', 'æ˜¼', 'é›†ä¸­'],
                    'relax': ['å¤œ', 'ãƒªãƒ©ãƒƒã‚¯ã‚¹'],
                    'meal': ['é£Ÿäº‹', 'é£Ÿå¾Œ'],
                    'social': ['ã„ã¤ã§ã‚‚', 'ä¸‡èƒ½']
                };

                const sceneKeywords = sceneMapping[sceneAnswer] || [];
                const hasMatchingScene = sceneKeywords.some(keyword => 
                    tea.bestTime.includes(keyword) || tea.keywords.some(k => k.includes(keyword))
                );

                return hasMatchingScene ? 1 : 0.5;
            }

            // æ–°ã—ã„å°‚é–€çš„ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°é–¢æ•°
            getCaffeineScore(tea, caffeineAnswer) {
                const caffeineMapping = {
                    'high': 'high',
                    'medium': 'medium',
                    'low': 'low'
                };

                const preferredCaffeine = caffeineMapping[caffeineAnswer];
                return tea.caffeine === preferredCaffeine ? 1 : 0.5;
            }

            getGradeScore(tea, gradeAnswer) {
                const gradeMapping = {
                    'premium': 'premium',
                    'standard': 'standard',
                    'either': 'any'
                };

                const preferredGrade = gradeMapping[gradeAnswer];
                if (preferredGrade === 'any') return 1;
                return tea.grade === preferredGrade ? 1 : 0.3;
            }

            getSeasonBonus(tea) {
                const currentDate = new Date();
                const month = currentDate.getMonth() + 1; // 1-12
                
                let currentSeason = '';
                if (month >= 3 && month <= 5) currentSeason = 'æ˜¥';
                else if (month >= 6 && month <= 8) currentSeason = 'å¤';
                else if (month >= 9 && month <= 11) currentSeason = 'ç§‹';
                else currentSeason = 'å†¬';

                if (tea.season === 'é€šå¹´') return 2;
                if (tea.season.includes(currentSeason)) return 3;
                return 0;
            }

            getHarmonyBonus(tea, answers) {
                let bonus = 0;
                
                // å‘³ã®ãƒãƒ©ãƒ³ã‚¹è©•ä¾¡
                const tasteValues = Object.values(tea.taste);
                const tasteRange = Math.max(...tasteValues) - Math.min(...tasteValues);
                
                // ãƒãƒ©ãƒ³ã‚¹ã®è‰¯ã„èŒ¶è‘‰ï¼ˆå‘³ã®å·®ãŒå°ã•ã„ï¼‰ã«ãƒœãƒ¼ãƒŠã‚¹
                if (tasteRange <= 4) bonus += 2;
                
                // è¤‡æ•°ã®è¦ç´ ã§é«˜ã‚¹ã‚³ã‚¢ã‚’å–ã£ãŸå ´åˆã®ãƒœãƒ¼ãƒŠã‚¹
                let highScoreCount = 0;
                if (this.getTimeScore(tea, answers[1]) > 0.8) highScoreCount++;
                if (this.getTasteScore(tea, answers[2]) > 0.8) highScoreCount++;
                if (this.getAromaScore(tea, answers[3]) > 0.8) highScoreCount++;
                if (this.getSceneScore(tea, answers[5]) > 0.8) highScoreCount++;
                
                if (highScoreCount >= 3) bonus += 3;
                else if (highScoreCount >= 2) bonus += 1;
                
                return bonus;
            }

            displayResult(result) {
                const resultSection = document.getElementById('result-section');
                
                // çµæœãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
                document.getElementById('result-icon').textContent = result.tea.icon;
                document.getElementById('result-name').textContent = result.tea.name;
                document.getElementById('result-description').textContent = result.tea.description;
                document.getElementById('match-score').textContent = result.score + '%';
                document.getElementById('water-temp').textContent = result.tea.waterTemp;
                document.getElementById('steep-time').textContent = result.tea.steepTime;
                document.getElementById('best-time').textContent = result.tea.bestTime;
                
                // æ–°ã—ã„è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
                const gradeMapping = {
                    'premium': 'é«˜ç´š',
                    'standard': 'æ¨™æº–'
                };
                const caffeineMapping = {
                    'high': 'é«˜ã„',
                    'medium': 'ä¸­ç¨‹åº¦',
                    'low': 'ä½ã„'
                };
                
                document.getElementById('tea-grade').textContent = gradeMapping[result.tea.grade] || result.tea.grade;
                document.getElementById('caffeine-level').textContent = caffeineMapping[result.tea.caffeine] || result.tea.caffeine;
                document.getElementById('origin').textContent = result.tea.origin;
                document.getElementById('season').textContent = result.tea.season;
                
                // å°‚é–€å®¶ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆ
                const professionalComment = this.generateProfessionalComment(result.tea, result.score, this.answers);
                document.getElementById('professional-comment').textContent = professionalComment;

                // å‘³è¦šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°
                Object.entries(result.tea.taste).forEach(([taste, value]) => {
                    const bar = document.getElementById(`${taste}-bar`);
                    const valueSpan = document.getElementById(`${taste}-value`);
                    
                    if (bar && valueSpan) {
                        setTimeout(() => {
                            bar.style.width = (value * 10) + '%';
                        }, 500);
                        valueSpan.textContent = value;
                    }
                });

                // çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
                resultSection.style.display = 'block';
                
                // ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                setTimeout(() => {
                    resultSection.scrollIntoView({ behavior: 'smooth' });
                }, 300);

                this.isCompleted = true;
            }

            generateProfessionalComment(tea, score, answers) {
                let comment = '';
                
                if (score >= 90) {
                    comment = `ã“ã®èŒ¶è‘‰ã¯ã€ã‚ãªãŸã®å‘³è¦šå‚¾å‘ã¨éå¸¸ã«ã‚ˆãåˆè‡´ã—ã¦ã„ã¾ã™ã€‚`;
                } else if (score >= 80) {
                    comment = `ã“ã®èŒ¶è‘‰ã¯ã€ã‚ãªãŸã®å¥½ã¿ã«ã‚ˆãåˆã†ã¨æ€ã‚ã‚Œã¾ã™ã€‚`;
                } else if (score >= 70) {
                    comment = `ã“ã®èŒ¶è‘‰ã¯ã€ã‚ãªãŸã®å¥½ã¿ã«é©ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚`;
                } else {
                    comment = `ã“ã®èŒ¶è‘‰ã¯ã€æ–°ã—ã„å‘³è¦šä½“é¨“ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚`;
                }
                
                // èŒ¶è‘‰ã®ç‰¹å¾´ã«åŸºã¥ã„ãŸã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
                if (tea.grade === 'premium') {
                    comment += ` é«˜ç´šèŒ¶è‘‰ã®ç¹Šç´°ãªé¢¨å‘³ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚`;
                }
                
                if (tea.caffeine === 'low') {
                    comment += ` ã‚«ãƒ•ã‚§ã‚¤ãƒ³ãŒå°‘ãªã„ã®ã§ã€å¤œé–“ã®é£²ç”¨ã«ã‚‚é©ã—ã¦ã„ã¾ã™ã€‚`;
                }
                
                if (tea.season === 'æ˜¥') {
                    comment += ` æ˜¥ã®æ–°èŠ½ã®çˆ½ã‚„ã‹ãªå‘³ã‚ã„ãŒç‰¹å¾´ã§ã™ã€‚`;
                }
                
                // è£½æ³•ã«ã‚ˆã‚‹ç‰¹å¾´
                if (tea.name.includes('æ·±è’¸ã—')) {
                    comment += ` æ·±è’¸ã—è£½æ³•ã«ã‚ˆã‚Šã€æ¿ƒåšã§ã¾ã‚ã‚„ã‹ãªå‘³ã‚ã„ã«ä»•ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚`;
                } else if (tea.name.includes('ç‰éœ²')) {
                    comment += ` è¦†ã„æ ½åŸ¹ã«ã‚ˆã‚Šã€ç”˜å‘³ã¨æ—¨å‘³ãŒæœ€å¤§é™ã«å¼•ãå‡ºã•ã‚Œã¦ã„ã¾ã™ã€‚`;
                } else if (tea.name.includes('ã»ã†ã˜')) {
                    comment += ` ç„™ç…ã«ã‚ˆã‚‹é¦™ã°ã—ã•ãŒã€ãƒªãƒ©ãƒƒã‚¯ã‚¹åŠ¹æœã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚`;
                }
                
                return comment;
            }

            restart() {
                // ãƒªã‚»ãƒƒãƒˆ
                this.currentQuestion = 1;
                this.answers = {};
                this.isCompleted = false;

                // UI ãƒªã‚»ãƒƒãƒˆ
                document.querySelector('.diagnosis-container').style.display = 'block';
                document.getElementById('result-section').style.display = 'none';
                document.getElementById('loading-section').style.display = 'none';

                // å…¨ã¦ã®é¸æŠçŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢
                document.querySelectorAll('.option-card').forEach(card => {
                    card.classList.remove('selected');
                });

                // æœ€åˆã®è³ªå•ã‚’è¡¨ç¤º
                this.showQuestion(1);

                // ãƒˆãƒƒãƒ—ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                document.querySelector('.diagnosis-hero').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        let teaAI;

        document.addEventListener('DOMContentLoaded', () => {
            teaAI = new TeaAIDiagnosis();
        });

        // ã‚¢ãƒ—ãƒªèª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®å‡¦ç†
        document.addEventListener('app:loaded', () => {
            console.log('ğŸ¤– æ—¥æœ¬èŒ¶AIè¨ºæ–­ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸï¼');
        });
    </script>
    
    <!-- å…±é€šãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <a href="../../../" class="footer-logo">nemotea.dev</a>
                    <p class="footer-description">
                        Tea-Driven Development - Technology meets Creativity
                    </p>
                </div>
                
                <div class="footer-links">
                    <a href="../../../" class="footer-link">Home</a>
                    <a href="../../../profile/" class="footer-link">Profile</a>
                    <a href="../../../works/" class="footer-link">Works</a>
                    <a href="../../../contact/" class="footer-link">Contact</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="footer-copyright">
                    Â© 2025 nemotea. Built with passion for technology and creativity.
                </p>
            </div>
        </div>
    </footer>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Tea AI Diagnosis",
        "description": "è³ªå•ã«ç­”ãˆã¦æœ€é©ãªæ—¥æœ¬èŒ¶ã‚’æ¨å¥¨ã™ã‚‹AIè¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ ",
        "url": "https://nemototea.github.io/works/interactive/tea-ai-diagnosis/",
        "applicationCategory": "Lifestyle",
        "operatingSystem": "Web Browser",
        "creator": {
            "@type": "Person",
            "name": "nemotea"
        }
    }
    </script>
</body>
</html>